<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HubSpot API Q&A</title>
  <style>
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu; margin:0; padding:24px; background:#0b0f14; color:#e6eef8}
    h1{font-size:22px; margin:0 0 16px}
    .card{max-width:900px; margin:0 auto; background:#121822; border:1px solid #1f2a3a; border-radius:14px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.25)}
    label{display:block; font-weight:600; margin:10px 0 6px}
    textarea{width:100%; padding:12px 14px; border-radius:10px; border:1px solid #2b3a52; background:#0e151f; color:#e6eef8; min-height:130px; resize:vertical}
    button{padding:10px 16px; border-radius:10px; border:0; background:#3b82f6; color:white; font-weight:600; cursor:pointer}
    button[disabled]{opacity:.6; cursor:not-allowed}
    .muted{color:#a8b3c7; font-size:13px}
    .answer{white-space:pre-wrap; background:#0e151f; border:1px solid #22314a; border-radius:10px; padding:14px; margin-top:10px}
    .small{font-size:12px; color:#8aa0bf}
    .ok{color:#22c55e}
    .err{color:#ef4444}
  </style>
</head>
<body>
  <div class="card">
    <h1>HubSpot API Q&amp;A</h1>
    <p class="muted">Digite sua pergunta sobre a API do HubSpot abaixo e receba a resposta diretamente.</p>
    
    <label for="question">Pergunta</label>
    <textarea id="question" placeholder="Ex.: Como autentico minha aplicação ao chamar a API do HubSpot?"></textarea>
    
    <div style="display:flex; gap:10px; align-items:center; margin-top:10px">
      <button id="askBtn">Perguntar</button>
      <span id="status" class="small muted"></span>
    </div>
    
    <div class="answer" id="answer"></div>
  </div>

<script>
  const WEBHOOK_URL = "https://n8n.heavensttwr.com.br/webhook/015bf0b0-754d-42d7-a1ce-a216b4136d48";

  const qInput = document.getElementById('question');
  const askBtn = document.getElementById('askBtn');
  const out = document.getElementById('answer');
  const status = document.getElementById('status');

  async function ask() {
    const question = qInput.value.trim();
    out.textContent = '';
    status.textContent = '';
    if (!question) { alert('Escreva uma pergunta.'); return; }

    askBtn.disabled = true;
    status.textContent = 'Enviando...';

    try {
      const res = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ question })
      });

      const text = await res.text();
      if (!res.ok) {
        status.innerHTML = `<span class="err">HTTP ${res.status}</span>`;
        out.textContent = 'Falha ao obter resposta. Verifique no n8n.';
        return;
      }

      status.innerHTML = '<span class="ok">OK</span>';
      out.textContent = text;
    } catch (err) {
      status.innerHTML = '<span class="err">Erro de rede</span>';
      out.textContent = String(err);
    } finally {
      askBtn.disabled = false;
    }
  }

  askBtn.addEventListener('click', ask);
  qInput.addEventListener('keydown', e => { if (e.key === 'Enter' && (e.ctrlKey||e.metaKey)) ask(); });
</script>
</body>
</html>